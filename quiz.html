<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title> Quizpage</title>
</head>
<body>
    <div class="nav">
        <a href="main.html">
            <div class="nav-head-info">
                <img src="images/info.png" alt="information logo" height="100px">
                <h1>Informasjon</h1>
            </div>
        </a>
        <a href="quiz.html" class="active">
            <div class="nav-head-quiz">
                <img src="images/question.png" alt="questionmark logo" height="100px">
                <h2>Quiz</h2>
            </div>
        </a>
    </div>

        <div class="informationSection"><h2>Choose topic for the quiz</h2></div>
        <div class="select-section">
            <button id="pokemon-btn" class="pokemon">Pokemon</button>
            <button id="football-btn" class="fotball">Fotball</button>
        </div>

        </div>
        <div class="output" id="outputInfo"></div>
        </div>

        <div>
            <div id="totalScore"></div>
        </div>

        <div>
            <div id="highScore"></div>
        </div>
        <div class="footer">
            <div class="header-footer">Click one of the buttons to choose topic</div>
            <a href="main.html"><u><p>Not read? Click here to find topics</p></u></a>
        </div>

        <script src="scripts/pokeArray.js"></script>
        <script src="scripts/fotbArray.js"></script>
        <script>

        let showPokeQuizBtn = document.getElementById("pokemon-btn");
        let showPlayerQuizBtn = document.getElementById("football-btn");
        let output = document.getElementById("outputInfo");
        let totalScore = document.getElementById("totalScore")

        

        const allPokemon = getAllPokemon();
        const allPlayers = getAllPlayers();
        var questions = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
        var remainingQuestions = [0,1,2,3,4,5,6,7,8,9]
        var positions = ["Goalkeeper", "Defender", "Midfield", "Central Attacking Midfield", "Right wing", "Left wing", "Striker"]
        
        let index=0;
        const loadQuiz = () => {
            var randomNumber = questions[Math.floor(Math.random()*questions.length)]
            questions.splice(questions.indexOf(randomNumber), 1)
            let myarray={"1": ()=>question1() ,"2":()=>question2(), "3":()=>question3(), 4:()=>question4(), "5":()=>question5(), };
                const question1 = () => {
                    remainingQuestions.pop();
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`How old is ${allPlayers[randomNumber].name} <img src="${allPlayers[randomNumber].playerImg}"> ?`;
                    let answer4 = allPlayers[randomNumber].age;
                    let answer1 = Math.floor(Math.random() * 20)+20;
                    if (answer1 == answer4){
                        answer1++
                        console.log("1 lik")
                    };
                    let answer2 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                    if(answer2 == answer4 || answer2 == answer1){
                        answer2++
                        console.log("2 lik")
                    }}
                    let answer3 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                    if(answer3 == answer4 || answer3 == answer1 || answer3 == answer2){
                        answer3++
                        console.log("3 lik")
                    }}
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }

                const question2=()=>{
                    remainingQuestions.pop();
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Who is this? <img src="${allPlayers[randomNumber].playerImg}"> ?`;
                    let answer4 = allPlayers[randomNumber].name;
                    var random1 = [Math.floor(Math.random() * 20)];
                    
                        if (random1 == randomNumber){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 20){
                            random1=0;
                        }
                    let answer1 = allPlayers[random1].name;
                    var random2 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                        if(random2 == randomNumber || random2 == random1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 20){
                                random2=0;
                        }
                };
                    let answer2 = allPlayers[random2].name;
                    var random3 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(random3 == randomNumber || random3 == random1 || random3 == random2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 20){
                            random3=0;
                        }
                };
                    let answer3 = allPlayers[random3].name;
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }

                const question3 = () => {
                    remainingQuestions.pop();
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`What position does he play? <img src="${allPlayers[randomNumber].playerImg}"> ?`;
                    let answer4 = allPlayers[randomNumber].position;
                    var random1 = [Math.floor(Math.random() * 7)];
                    var check1 = positions[random1]
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if (positions[random1] == answer4){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 7){
                            random1=0;
                            valuecheck=0;
                        }
                    };

                    let answer1 = positions[random1];
                    console.log(answer1)
                    
                    var random2 = [Math.floor(Math.random() * 7)];
                    var check2 = positions[random2]
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(positions[random2] == answer4 || positions[random2] == answer1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 7){
                                random2=0;
                                valuecheck=0;
                        }
                };
                    let answer2 = positions[random2];
                    var random3 = [Math.floor(Math.random() * 7)];
                    var check3 = positions[random3]
                    
                    for(let valuecheck = 0; valuecheck < 3; valuecheck++){
                        if(positions[random3] == answer4 || positions[random3] == answer1 || positions[random3] == answer2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 7){
                            random3=0;
                            valuecheck=0;
                        }
                };
                    let answer3 = positions[random3];
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }

                const question4 = () => {
                    remainingQuestions.pop();
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Who is the?`;
                    let answer4 = allPlayers[randomNumber].age;
                    let answer1 = Math.floor(Math.random() * 20)+20;
                    if (answer1 == answer4){
                        answer1++
                        console.log("1 lik")
                    };
                    let answer2 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                    if(answer2 == answer4 || answer2 == answer1){
                        answer2++
                        console.log("2 lik")
                    }}
                    let answer3 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                    if(answer3 == answer4 || answer3 == answer1 || answer3 == answer2){
                        answer3++
                        console.log("3 lik")
                    }}
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }

                const question5 = () => {
                    remainingQuestions.pop();
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`How old is ${allPlayers[randomNumber].name} <img src="${allPlayers[randomNumber].playerImg}"> ?`;
                    let answer4 = allPlayers[randomNumber].age;
                    let answer1 = Math.floor(Math.random() * 20)+20;
                    if (answer1 == answer4){
                        answer1++
                        console.log("1 lik")
                    };
                    let answer2 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                    if(answer2 == answer4 || answer2 == answer1){
                        answer2++
                        console.log("2 lik")
                    }}
                    let answer3 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                    if(answer3 == answer4 || answer3 == answer1 || answer3 == answer2){
                        answer3++
                        console.log("3 lik")
                    }}
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }
            let myfunc=myarray["2"];
            myfunc();

            var questionOrder = [0,1,2,3]
            var question1Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question1Placement),1)
            var question2Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question2Placement),1)
            var question3Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question3Placement),1)
            var question4Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question4Placement),1)



            output.innerHTML = ""
            output.innerHTML += `
            <h2>${questionArray[index-1].question}</h2>
            <input type="button" onclick="answerFunction(${question1Placement})" value="a:${questionArray[index-1].answers[question1Placement].o}">
            <input type="button" onclick="answerFunction(${question2Placement})" value="b:${questionArray[index-1].answers[question2Placement].o}">
            <input type="button" onclick="answerFunction(${question3Placement})" value="c:${questionArray[index-1].answers[question3Placement].o}">
            <input type="button" onclick="answerFunction(${question4Placement})" value="d:${questionArray[index-1].answers[question4Placement].o}">
            `;

            


        };
        localStorage.setItem("currentScore", 0)
        localStorage.setItem("questionsAnswered", 0)
        const answerFunction = (number) => {
            var currentScore = parseInt(localStorage.getItem("currentScore"));
            var questionsAnswered = parseInt(localStorage.getItem("questionsAnswered"));

            switch (questionArray[0].answers[number].isCorrect){
                case true:{
                    localStorage.setItem("currentScore", ++currentScore)
                    localStorage.setItem("questionsAnswered", ++questionsAnswered)
                    console.log(currentScore)
                    output.innerHTML+=`<input type="button" onclick="loadQuiz()" value="Correct Answer! Click here to load the next quesiton">`

                };
                break;
                case false:{
                    localStorage.setItem("questionsAnswered", ++currentScore)

                    output.innerHTML+=`<input type="button" onclick="loadQuiz()" value="Sorry, thats not correct! Click here to load the next quesiton">`
                };
                default : ;
            }
            console.log(questionsAnswered)
            };

const questionArray=[];











        


        showPokeQuizBtn.addEventListener("click", loadQuiz)
        //showPlayerQuizBtn.addEventListener("click", createFilterButtons2);

        </script>

</body>
</html>