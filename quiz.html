<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title> Quizpage</title>
</head>
<body>
    <nav class="nav">
        <a href="main.html">
            <div class="nav-head-info">
                <img src="images/info.png" alt="information logo" class="nav-logo">
                <h1>Informasjon</h1>
            </div>
        </a>
        <a href="quiz.html" class="active">
            <div class="nav-head-quiz">
                <img src="images/question.png" alt="questionmark logo" class="nav-logo">
                <h2>Quiz</h2>
            </div>
        </a>
    </nav>

    <section class="informationSection"><h2>Choose topic for the quiz</h2></section>
       
    <div class="select-section">
         <button id="pokemon-btn" class="pokemon">Pokemon</button>
         <button id="football-btn" class="fotball">Fotball</button>
    </div>

        <section class="quiz-Section">
            <div class="outputQuiz" id="outputInfo"></div>
            <div class="nextQuestion" id="nextQuestionBox"></div>
            <div id="totalScore"></div>
            <div id="highScore">
                <div id="pokeScore"></div>
                <div id="footScore"></div>
            </div>
        </section>
        <footer class="footer">
            <div class="header-footer">Click one of the buttons to choose topic!  </div>
            <a href="main.html"><u style="color: rgb(255, 255, 255)"> Not read yet? Click here to find topics</u></a>
        </footer>

        <script src="scripts/pokeArray.js"></script>
        <script src="scripts/fotbArray.js"></script>
        <script>

        let showPokeQuizBtn = document.getElementById("pokemon-btn");
        let showPlayerQuizBtn = document.getElementById("football-btn");
        let output = document.getElementById("outputInfo");
        let totalScore = document.getElementById("totalScore")
        let nextQuestion = document.getElementById("nextQuestionBox")
        let pokeScore = document.getElementById("pokeScore")
        let footScore = document.getElementById("footScore")
        

        const allPokemon = getAllPokemon();
        const allPlayers = getAllPlayers();
        var questions = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
        var remainingQuestions = 10;
        var positions = ["Goalkeeper", "Defender", "Midfield", "Central Attacking Midfield", "Right wing", "Left wing", "Striker"]
        var answerCheck = 0;
        var quizTracker = 0;
        var currentScore = 0;
        var questionsAnswered = 0;
        let functionChooser = 4;
        var localTull = localStorage.setItem("counter", 0);
        
        let index=0;
        const loadFootballQuiz = () => {
            var randomNumber = questions[Math.floor(Math.random()*questions.length)]
            questions.splice(questions.indexOf(randomNumber), 1)
            let myarray={"1": ()=>question1() ,"2":()=>question2(), "3":()=>question3(), 4:()=>question4(), "5":()=>question5(), };
                const question1 = () => {
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`How old is ${allPlayers[randomNumber].name}? <img src="${allPlayers[randomNumber].playerImg}" class="questionImg"> `;
                    let answer4 = allPlayers[randomNumber].age;
                    let answer1 = Math.floor(Math.random() * 20)+20;
                    if (answer1 == answer4){
                        answer1++
                        console.log("1 lik")
                    };
                    let answer2 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                    if(answer2 == answer4 || answer2 == answer1){
                        answer2++
                        console.log("2 lik")
                    }}
                    let answer3 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                    if(answer3 == answer4 || answer3 == answer1 || answer3 == answer2){
                        answer3++
                        console.log("3 lik")
                    }}
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                    functionChooser = 2;
                }

                const question2=()=>{
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Who is this? <img src="${allPlayers[randomNumber].playerImg}" class="questionImg"> `;
                    let answer4 = allPlayers[randomNumber].name;
                    var random1 = [Math.floor(Math.random() * 20)];
                    
                        if (random1 == randomNumber){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 20){
                            random1=0;
                        }
                    let answer1 = allPlayers[random1].name;
                    var random2 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                        if(random2 == randomNumber || random2 == random1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 20){
                                random2=0;
                        }
                };
                    let answer2 = allPlayers[random2].name;
                    var random3 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(random3 == randomNumber || random3 == random1 || random3 == random2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 20){
                            random3=0;
                        }
                };
                    let answer3 = allPlayers[random3].name;
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                    functionChooser = 3;
                }

                const question3 = () => {
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Which position does ${allPlayers[randomNumber].name} play? <img src="${allPlayers[randomNumber].playerImg}" class="questionImg"> `;
                    let answer4 = allPlayers[randomNumber].position;
                    var random1 = [Math.floor(Math.random() * 7)];
                    var check1 = positions[random1]
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if (positions[random1] == answer4){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 7){
                            random1=0;
                            valuecheck=0;
                        }
                    };

                    let answer1 = positions[random1];
                    console.log(answer1)
                    
                    var random2 = [Math.floor(Math.random() * 7)];
                    var check2 = positions[random2]
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(positions[random2] == answer4 || positions[random2] == answer1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 7){
                                random2=0;
                                valuecheck=0;
                        }
                };
                    let answer2 = positions[random2];
                    var random3 = [Math.floor(Math.random() * 7)];
                    var check3 = positions[random3]
                    
                    for(let valuecheck = 0; valuecheck < 3; valuecheck++){
                        if(positions[random3] == answer4 || positions[random3] == answer1 || positions[random3] == answer2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 7){
                            random3=0;
                            valuecheck=0;
                        }
                };
                    let answer3 = positions[random3];
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                    functionChooser = 1;
                }

                const question4 = () => {
                    remainingQuestions = remainingQuestions-1;
                    console.log(remainingQuestions)
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Who is the best football player in the world? <img src="/images/mrn.png" class="questionImg">`;
                    answer1 = "Christiano Ronaldo";
                    answer2 = "Erling Haaland";
                    answer3 = "Neymar";
                    answer4 = "Lionel Messi";
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                    functionChooser = 1;
                }

                const question5 = () => {
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`How old is? ${allPlayers[randomNumber].name} <img src="${allPlayers[randomNumber].playerImg}" class="questionImg"> `;
                    let answer4 = allPlayers[randomNumber].age;
                    let answer1 = Math.floor(Math.random() * 20)+20;
                    if (answer1 == answer4){
                        answer1++
                        console.log("1 lik")
                    };
                    let answer2 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                    if(answer2 == answer4 || answer2 == answer1){
                        answer2++
                        console.log("2 lik")
                    }}
                    let answer3 = Math.floor(Math.random() * 20)+20;
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                    if(answer3 == answer4 || answer3 == answer1 || answer3 == answer2){
                        answer3++
                        console.log("3 lik")
                    }}
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }
            let myfunc=myarray[functionChooser];
            myfunc();

            var questionOrder = [0,1,2,3]
            var question1Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question1Placement),1)
            var question2Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question2Placement),1)
            var question3Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question3Placement),1)
            var question4Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question4Placement),1)
            answerCheck = 0;


            nextQuestion.innerHTML = ""
            output.innerHTML = ""
            output.innerHTML += `
            <h1 class="quiz-Question">${questionArray[index-1].question}</h1>
            <div class="quiz-buttons">
                <input type="button" class="answerButton" onclick="answerFunction(${question1Placement})" value="a:${questionArray[index-1].answers[question1Placement].o}">
                <input type="button" class="answerButton" onclick="answerFunction(${question2Placement})" value="b:${questionArray[index-1].answers[question2Placement].o}">
                <input type="button" class="answerButton" onclick="answerFunction(${question3Placement})" value="c:${questionArray[index-1].answers[question3Placement].o}">
                <input type="button" class="answerButton" onclick="answerFunction(${question4Placement})" value="d:${questionArray[index-1].answers[question4Placement].o}">
            </div>
            `;

            


        };
        const loadPokemonQuiz = () => {
            var randomNumber = questions[Math.floor(Math.random()*questions.length)]
            questions.splice(questions.indexOf(randomNumber), 1)
            let myarray={"1": ()=>question1() ,"2":()=>question2(), "3":()=>question3(), 4:()=>question4(), "5":()=>question5(), };
                const question1 = () => {
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Whos that Pokemon? <img src="${allPokemon[randomNumber].image}" class="questionImg"> `;
                    let answer4 = allPokemon[randomNumber].name;
                    var random1 = [Math.floor(Math.random() * 20)];
                    
                        if (random1 == randomNumber){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 20){
                            random1=0;
                        }
                    let answer1 = allPokemon[random1].name;
                    var random2 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                        if(random2 == randomNumber || random2 == random1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 20){
                                random2=0;
                        }
                };
                    let answer2 = allPokemon[random2].name;
                    var random3 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(random3 == randomNumber || random3 == random1 || random3 == random2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 20){
                            random3=0;
                        }
                };
                    let answer3 = allPokemon[random3].name;
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                    
                }

                const question2=()=>{
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`What type is this pokemon? <img src="${allPokemon[randomNumber].image}" class="questionImg"> `;
                    let answer4 = allPokemon[randomNumber].type1 ;
                    var random1 = [Math.floor(Math.random() * 20)];
                    
                        if (random1 == randomNumber){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 20){
                            random1=0;
                        }
                    let answer1 = allPokemon[random1].type1;
                    var random2 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                        if(random2 == randomNumber || random2 == random1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 20){
                                random2=0;
                        }
                };
                    let answer2 = allPokemon[random2].type1;
                    var random3 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(random3 == randomNumber || random3 == random1 || random3 == random2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 20){
                            random3=0;
                        }
                };
                    let answer3 = allPokemon[random3].type1;
                    
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }

                const question3 = () => {
                    remainingQuestions = remainingQuestions-1;
                    console.log(remainingQuestions)
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`Which pokemon is most popular? <img src="/images/starters.png" class="questionImg">` ;
                    answer1 = "Charizard";
                    answer2 = "Blastoise";
                    answer3 = "Venusaur";
                    answer4 = "Squirtle";
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:true}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:false}];
                    questionArray.push(questionArrayItem);
                }
                const question4 = () => {
                    remainingQuestions--;
                    var questionArrayItem = {};
                    questionArrayItem["id"]=index++;
                    questionArrayItem["question"]=`What description fits to this pokemon, ${allPokemon[randomNumber].name}? <img src="${allPokemon[randomNumber].image}" class="questionImg"> `;
                    let answer4 = allPokemon[randomNumber].pokeInfo;
                    var random1 = [Math.floor(Math.random() * 20)];
                    
                        if (random1 == randomNumber){
                            random1++
                            console.log("1 lik")
                        };
                        if(random1 >= 20){
                            random1=0;
                        }
                    let answer1 = allPokemon[random1].pokeInfo;
                    var random2 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 1; valuecheck++){
                        if(random2 == randomNumber || random2 == random1){
                            random2++
                            console.log("2 lik")
                        }
                        if(random2 >= 20){
                                random2=0;
                        }
                };
                    let answer2 = allPokemon[random2].pokeInfo;
                    var random3 = [Math.floor(Math.random() * 20)];
                    
                    for(let valuecheck = 0; valuecheck < 2; valuecheck++){
                        if(random3 == randomNumber || random3 == random1 || random3 == random2){
                            random3++
                            console.log("3 lik")
                        }
                        if(random3 >= 20){
                            random3=0;
                        }
                };
                    let answer3 = allPokemon[random3].pokeInfo;
                    questionArrayItem["answers"]=[{o:answer1, isCorrect:false}, {o:answer2, isCorrect:false}, {o:answer3, isCorrect:false}, {o:answer4, isCorrect:true}];
                    questionArray.push(questionArrayItem);
                }
                
            let myfunc=myarray["3"];
            myfunc();

            var questionOrder = [0,1,2,3]
            var question1Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question1Placement),1)
            var question2Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question2Placement),1)
            var question3Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question3Placement),1)
            var question4Placement = questionOrder[Math.floor(Math.random()*questionOrder.length)]
            questionOrder.splice(questionOrder.indexOf(question4Placement),1)
            answerCheck = 0;


            nextQuestion.innerHTML = ""
            output.innerHTML = ""
            output.innerHTML += `
            <h1 class="quiz-Question">${questionArray[index-1].question}</h1>
            <div class="quiz-buttons">
                <div class="answerButton" onclick="answerFunction(${question1Placement})" value="a:">${questionArray[index-1].answers[question1Placement].o}</div>
                <div class="answerButton" onclick="answerFunction(${question2Placement})" value="b:">${questionArray[index-1].answers[question2Placement].o}</div>
                <div class="answerButton" onclick="answerFunction(${question3Placement})" value="c:">${questionArray[index-1].answers[question3Placement].o}</div>
                <div class="answerButton" onclick="answerFunction(${question4Placement})" value="d:">${questionArray[index-1].answers[question4Placement].o}</div>
            </div>
            `;

            


        };
        

        const answerFunction = (number) => {
            
            
            
            if (remainingQuestions == 0){
                quizTracker = 1;
            };
            switch (quizTracker){
                

                case  0:{
                    switch (questionArray[0].answers[number].isCorrect){
                    
                    case true: 
                    case answerCheck = 0:{
                        currentScore++;
                        questionsAnswered++;
                        console.log(currentScore)
                        nextQuestion.innerHTML=`<input type="button" class="nextQuestion-Button" style="background-color: #068806" onclick="loadFootballQuiz()" value="Correct Answer! Click here to load the next quesiton">`
                        answerCheck = 1;

                    };
                    break;
                    case false:
                    case answerCheck = 0:{
                        questionsAnswered++
                        nextQuestion.innerHTML=`<input type="button" class="nextQuestion-Button" style="background-color: #d41e1e"  onclick="loadFootballQuiz()" value="Sorry, thats not correct! Click here to load the next quesiton">`
                        answerCheck = 1;
                    };
                    default :console.log("!", answerCheck) ;
            }}
            break;
            case  1:{

                    var counter = localStorage.getItem("counter");
                    counter++
                    localStorage.setItem(""+counter, currentScore)
                    localStorage.setItem("counter", counter)
                    
                    console.log("FERDI", currentScore)
                    nextQuestion.innerHTML=`<input type="button" class="nextQuestion-Button" style="background-color: #8a791b" onclick="loadQuiz()" value="Quiz complete! Click here to retry the quiz.">`
                    var scores = []
                    var sortedScores = []
                    
                    footScore.innerHTML = "";
                    for (let i = 0; i < counter; i++) {
                        scores.push(localStorage.getItem(i+1))     
                    }
                    for (let i = 0; i < scores.length; i++) {
                        sortedScores = scores.sort(function (a, b) {  return b - a;  });
                        footScore.innerHTML+=`<p>${sortedScores[i]}</p>`
                        
                    }
                    currentScore = 0;
                    questionsAnswered = 0;
                    questions = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]
                    remainingQuestions = 10;
                    quizTracker = 0;
                    
                    
                }
                


                default :console.log("switch ferdig");
            };
            
            console.log(remainingQuestions, currentScore)
            };
            
            

const questionArray=[];

        showPlayerQuizBtn.addEventListener("click", loadFootballQuiz)
        showPokeQuizBtn.addEventListener("click", loadPokemonQuiz)

        //showPlayerQuizBtn.addEventListener("click", createFilterButtons2);

        </script>

</body>
</html>